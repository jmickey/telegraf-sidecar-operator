# Telegraf Sidecar Operator

[//]: # (README.md generated by gotmpl. DO NOT EDIT)

![Type: application](https://img.shields.io/badge/Type-application-informational?style=flat-square) ![Version: 1.3.2](https://img.shields.io/badge/Version-1.3.2-informational?style=flat-square) ![AppVersion: 0.3.2](https://img.shields.io/badge/AppVersion-0.3.2-informational?style=flat-square)

Use Kubernetes Pod annotations to automatically inject and configure Telegraf sidecar containers.

## Maintainers

| Name | Email | Url |
| ---- | ------ | --- |
| jmickey | <github@mickey.dev> | <https://mickey.dev> |

## Installing the Chart

To install the chart with the release name `telegraf-sidecar-operator`:

```bash
helm repo add tso https://telegraf-sidecar-operator.mickey.dev
helm install telegraf-sidecar-operator tso/telegraf-sidecar-operator
```

## Uninstalling the Chart

To uninstall the `telegraf-sidecar-operator` deployment:

```bash
helm uninstall telegraf-sidecar-operator
```

The command removes all the Kubernetes components associated with the chart and deletes the release.

## Values

| Key | Type | Default | Description |
|-----|------|---------|-------------|
| affinity | object | `{}` |  |
| commonLabels | object | `{}` | Common labels to be added to all resources. |
| fullnameOverride | string | `""` |  |
| image.pullPolicy | string | `"IfNotPresent"` |  |
| image.repository | string | `"docker.io/jmickey/telegraf-sidecar-operator"` |  |
| imagePullSecrets | list | `[]` |  |
| mutatingWebhook.namespaceSelector | object | `{}` | Configure the namespace selection to call the webhook |
| nameOverride | string | `""` |  |
| nodeSelector | object | `{}` |  |
| operator.classes.data | object | a basic configuration, recommend replacing! | Telegraf classes data. A single class per key. |
| operator.classes.default | string | `"default"` | The default Telegraf "class" to be used when configuring sidecar containers. |
| operator.classes.secretName | string | `"telegraf-classes"` | The name of the telegraf classes secret. |
| operator.enableInternalPlugin | bool | `true` | Specify if the `[[inputs.internal]]` plugin should be enabled by default in telegraf sidecar containers. |
| operator.logEncoding | string | `"console"` | Configure the log line encoding for the operator. Can be one of `json` or `console`. |
| operator.logLevel | string | `"info"` | Configure the logging level for the operator. Can be one of `debug`, `info`, `error`. |
| operator.secretNamePrefix | string | `"telegraf-config"` | Set the telegraf configuration secret name prefix, defaults to 'telegraf-config'. |
| podAnnotations | object | `{}` |  |
| podLabels | object | `{}` |  |
| podSecurityContext | object | `{}` |  |
| replicaCount | int | `2` |  |
| resources.limits.cpu | string | `"250m"` |  |
| resources.limits.memory | string | `"256Mi"` |  |
| resources.requests.cpu | string | `"100m"` |  |
| resources.requests.memory | string | `"128Mi"` |  |
| securityContext.runAsNonRoot | bool | `true` |  |
| securityContext.seccompProfile.type | string | `"RuntimeDefault"` |  |
| serviceAccount.annotations | object | `{}` | Annotations to add to the service account |
| sidecar.enableNativeSidecars | bool | `false` | Enable the use of native sidecar containers introduced in Kubernetes 1.28+ https://kubernetes.io/blog/2023/08/25/native-sidecar-containers/ |
| sidecar.image | string | `"docker.io/library/telegraf:1.30-alpine"` | The Telegraf container image to use for sidecar containers |
| sidecar.resources | object | `{"limits":{"cpu":"100m","memory":"128Mi"},"requests":{"cpu":"10m","memory":"56Mi"}}` | Default resources (request/limits) for sidecar containers |
| tolerations | list | `[]` |  |
